<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è²»ç”¨åˆ†æ”¤æ˜ç´° | åŒ—æµ·é“æ»‘é›ªä¹‹æ—…</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            min-height: 100vh;
        }

        .card {
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Icons
        const IconArrowLeft = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m12 19-7-7 7-7" /><path d="M19 12H5" /></svg>
        );
        const IconUser = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" /><circle cx="12" cy="7" r="4" /></svg>
        );
        const IconWallet = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 12V7H5a2 2 0 0 1 0-4h14v4" /><path d="M3 5v14a2 2 0 0 0 2 2h16v-5" /><path d="M18 12a2 2 0 0 0 0 4h4v-4Z" /></svg>
        );
        const IconCheck = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M20 6 9 17l-5-5" /></svg>
        );
        const IconMinus = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M5 12h14" /></svg>
        );

        const CostsApp = () => {
            const [selectedPerson, setSelectedPerson] = useState(null);

            // æˆå“¡è²»ç”¨æ•¸æ“š
            const membersData = [
                {
                    id: 'tao',
                    name: 'ç¢©æ¿¤ (TAO)',
                    emoji: 'ğŸ‹',
                    color: 'from-blue-500 to-cyan-500',
                    bgColor: 'bg-blue-50',
                    borderColor: 'border-blue-200',
                    income: [
                        { desc: 'å˜‰ç¥¥é‚„ APA ç¾½ç”°+æœ­å¹Œ (å«å¹«è›‡å‡º)', amount: 36500 },
                        { desc: 'å–¬ç«é‚„ APA ç¾½ç”°+æœ­å¹Œ', amount: 30000 },
                        { desc: 'è›‡é‚„ APA ç¾½ç”° (æœ­å¹Œå…ä»˜)', amount: 17000 },
                    ],
                    expense: [
                        { desc: 'ä»˜çµ¦å˜‰ç¥¥ (äºŒä¸–è°·ä½å®¿)', amount: 68200 },
                        { desc: 'ä»˜çµ¦å˜‰ç¥¥ (å›ç¨‹å·´å£«)', amount: 5250 },
                        { desc: 'å»ç¨‹å·´å£« (è‡ªå·±çš„ç­æ¬¡)', amount: 6000 },
                        { desc: 'æ»‘é›ªæ•™ç·´ Josh (20%)', amount: 57000 },
                        { desc: 'å¹«è›‡å‡ºæœ­å¹Œä½å®¿éƒ¨åˆ†', amount: 6500 },
                    ],
                    misc: 25000,
                    note: 'å› ç‚ºå¢Šä»˜ APA ä½å®¿ï¼Œæœƒæ”¶åˆ°å…¶ä»–äººè½‰å¸³ï¼Œæ‰€ä»¥å¯¦éš›éœ€æº–å‚™ç¾é‡‘è¼ƒå°‘ã€‚æœ­å¹Œä½å®¿å¹«è›‡å‡º Â¥6,500ã€‚'
                },
                {
                    id: 'sho',
                    name: 'å˜‰ç¥¥ (SHO)',
                    emoji: 'ğŸ¿',
                    color: 'from-green-500 to-emerald-500',
                    bgColor: 'bg-green-50',
                    borderColor: 'border-green-200',
                    income: [
                        { desc: 'ç¢©æ¿¤é‚„ äºŒä¸–è°·+å›ç¨‹å·´å£«', amount: 73450 },
                        { desc: 'å–¬ç«é‚„ äºŒä¸–è°·+å·´å£«å…¨é¡', amount: 79450 },
                        { desc: 'ç‘æ–‡é‚„ äºŒä¸–è°·+å·´å£«å…¨é¡', amount: 79450 },
                    ],
                    expense: [
                        { desc: 'ä»˜çµ¦ç¢©æ¿¤ (APA ç¾½ç”°+æœ­å¹Œå«å¹«è›‡å‡º)', amount: 36500 },
                        { desc: 'æ»‘é›ªæ•™ç·´ Josh (40%)', amount: 114000 },
                    ],
                    misc: 25000,
                    hasExcess: true,
                    note: 'ğŸ‰ å·²å¢Šä»˜äºŒä¸–è°·ä½å®¿å’Œå·´å£«ï¼Œæ”¶åˆ°é‚„æ¬¾å¾Œæ‰£é™¤è‡ªå·±æ‡‰ä»˜é …ç›®ï¼Œæœƒæœ‰ç›ˆé¤˜ï¼æœ­å¹Œä½å®¿å¹«è›‡å‡º Â¥6,500ã€‚'
                },
                {
                    id: 'totoro',
                    name: 'ç‘æ–‡ (TOTORO)',
                    emoji: 'ğŸ',
                    color: 'from-purple-500 to-pink-500',
                    bgColor: 'bg-purple-50',
                    borderColor: 'border-purple-200',
                    income: [],
                    expense: [
                        { desc: 'ä»˜çµ¦ç¢©æ¿¤ (APA ç¾½ç”°)', amount: 17000 },
                        { desc: 'ä»˜çµ¦å˜‰ç¥¥ (äºŒä¸–è°·ä½å®¿)', amount: 68200 },
                        { desc: 'ä»˜çµ¦å˜‰ç¥¥ (å›ç¨‹å·´å£«)', amount: 5250 },
                        { desc: 'ä»˜çµ¦å˜‰ç¥¥ (å»ç¨‹å·´å£«)', amount: 6000 },
                        { desc: 'æ»‘é›ªæ•™ç·´ Josh (40%)', amount: 114000 },
                        { desc: 'é›ªå…·ç§Ÿå€Ÿ (ç´„3å¤©)', amount: 20000 },
                    ],
                    misc: 20000,
                    note: 'ç¬¬ä¸€æ¬¡æ»‘é›ªéœ€ç§Ÿé›ªå…·ï¼ŒåŠ ä¸Šæ•™ç·´è²»ä½”æ¯”è¼ƒé«˜ã€‚ğŸ’š 2/11 æœ­å¹Œä½å®¿ç”±ç¢©æ¿¤å’Œå˜‰ç¥¥å¹«å‡ºï¼'
                },
                {
                    id: 'lolo',
                    name: 'å–¬ç« (ç¾…ç¾…)',
                    emoji: 'ğŸ§¸',
                    color: 'from-orange-500 to-amber-500',
                    bgColor: 'bg-orange-50',
                    borderColor: 'border-orange-200',
                    income: [],
                    expense: [
                        { desc: 'ä»˜çµ¦ç¢©æ¿¤ (APA ç¾½ç”°+æœ­å¹Œ)', amount: 30000 },
                        { desc: 'ä»˜çµ¦å˜‰ç¥¥ (äºŒä¸–è°·ä½å®¿)', amount: 68200 },
                        { desc: 'ä»˜çµ¦å˜‰ç¥¥ (å›ç¨‹å·´å£«)', amount: 5250 },
                        { desc: 'ä»˜çµ¦å˜‰ç¥¥ (å»ç¨‹å·´å£«)', amount: 6000 },
                    ],
                    misc: 20000,
                    note: 'ä¸åƒåŠ æ»‘é›ªæ•™ç·´èª²ç¨‹ï¼Œè²»ç”¨ç›¸å°è¼ƒä½ã€‚'
                }
            ];

            // è¨ˆç®—å‡½å¼
            const calcTotal = (items) => items.reduce((sum, item) => sum + item.amount, 0);
            const formatYen = (amount) => `Â¥${amount.toLocaleString()}`;
            const formatTWD = (yen) => `NT$${Math.round(yen * 0.2).toLocaleString()}`;

            const PersonCard = ({ person }) => {
                const totalIncome = calcTotal(person.income);
                const totalExpense = calcTotal(person.expense);
                const netAmount = totalExpense - totalIncome + person.misc;

                return (
                    <div
                        className={`card bg-white rounded-2xl shadow-lg overflow-hidden cursor-pointer border-2 ${selectedPerson === person.id ? person.borderColor : 'border-transparent'}`}
                        onClick={() => setSelectedPerson(selectedPerson === person.id ? null : person.id)}
                    >
                        {/* Header */}
                        <div className={`bg-gradient-to-r ${person.color} p-4 text-white`}>
                            <div className="flex items-center justify-between">
                                <div className="flex items-center gap-3">
                                    <span className="text-3xl">{person.emoji}</span>
                                    <div>
                                        <h2 className="font-bold text-lg">{person.name}</h2>
                                        <p className="text-white/80 text-sm">é»æ“ŠæŸ¥çœ‹æ˜ç´°</p>
                                    </div>
                                </div>
                                <div className="text-right">
                                    <p className="text-white/70 text-xs">å»ºè­°æº–å‚™</p>
                                    <p className="font-bold text-xl">{formatYen(netAmount)}</p>
                                    <p className="text-white/80 text-sm">{formatTWD(netAmount)}</p>
                                </div>
                            </div>
                        </div>

                        {/* å±•é–‹çš„æ˜ç´° */}
                        {selectedPerson === person.id && (
                            <div className={`p-4 ${person.bgColor} animate-fade-in`}>
                                {/* æ”¶å…¥ */}
                                {person.income.length > 0 && (
                                    <div className="mb-4">
                                        <h3 className="text-xs font-bold text-green-700 uppercase tracking-wider mb-2 flex items-center gap-1">
                                            <IconCheck className="w-4 h-4" /> æœƒæ”¶åˆ°çš„æ¬¾é …
                                        </h3>
                                        <div className="bg-white rounded-xl p-3 space-y-2 border border-green-100">
                                            {person.income.map((item, idx) => (
                                                <div key={idx} className="flex justify-between items-center text-sm">
                                                    <span className="text-slate-600">{item.desc}</span>
                                                    <span className="font-mono font-bold text-green-600">+{formatYen(item.amount)}</span>
                                                </div>
                                            ))}
                                            <div className="border-t border-green-100 pt-2 flex justify-between items-center">
                                                <span className="font-bold text-green-700">æ”¶å…¥å°è¨ˆ</span>
                                                <span className="font-mono font-bold text-green-700 text-lg">+{formatYen(totalIncome)}</span>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {/* æ”¯å‡º */}
                                <div className="mb-4">
                                    <h3 className="text-xs font-bold text-red-700 uppercase tracking-wider mb-2 flex items-center gap-1">
                                        <IconMinus className="w-4 h-4" /> éœ€æ”¯ä»˜çš„è²»ç”¨
                                    </h3>
                                    <div className="bg-white rounded-xl p-3 space-y-2 border border-red-100">
                                        {person.expense.map((item, idx) => (
                                            <div key={idx} className="flex justify-between items-center text-sm">
                                                <span className="text-slate-600">{item.desc}</span>
                                                <span className="font-mono font-bold text-red-600">-{formatYen(item.amount)}</span>
                                            </div>
                                        ))}
                                        <div className="border-t border-red-100 pt-2 flex justify-between items-center">
                                            <span className="font-bold text-red-700">æ”¯å‡ºå°è¨ˆ</span>
                                            <span className="font-mono font-bold text-red-700 text-lg">-{formatYen(totalExpense)}</span>
                                        </div>
                                    </div>
                                </div>

                                {/* é›œè²»èˆ‡æ·¨é¡ */}
                                <div className="bg-white rounded-xl p-3 border border-slate-200">
                                    <div className="flex justify-between items-center text-sm mb-2">
                                        <span className="text-slate-600">é¤é£²/äº¤é€š/è³¼ç‰©ç­‰é ä¼°</span>
                                        <span className="font-mono text-slate-600">~{formatYen(person.misc)}</span>
                                    </div>
                                    <div className="border-t border-slate-200 pt-2">
                                        <div className="flex justify-between items-center">
                                            <span className="font-bold text-slate-800">æ·¨é¡è¨ˆç®—</span>
                                            <span className="font-mono text-slate-500 text-xs">
                                                {formatYen(totalExpense)} - {formatYen(totalIncome)} + {formatYen(person.misc)}
                                            </span>
                                        </div>
                                        <div className="flex justify-between items-center mt-1">
                                            <span className="font-bold text-lg text-slate-900">ğŸ’° å»ºè­°æº–å‚™</span>
                                            <div className="text-right">
                                                <span className="font-mono font-bold text-xl text-blue-600 block">{formatYen(netAmount)}</span>
                                                <span className="font-mono text-sm text-slate-500">{formatTWD(netAmount)}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* å‚™è¨» */}
                                <div className="mt-3 p-3 bg-yellow-50 rounded-lg border border-yellow-200">
                                    <p className="text-xs text-yellow-800">ğŸ’¡ {person.note}</p>
                                </div>
                            </div>
                        )}
                    </div>
                );
            };

            return (
                <div className="flex flex-col min-h-screen max-w-md mx-auto">
                    {/* Header */}
                    <div className="bg-white/10 backdrop-blur-md text-white p-4 sticky top-0 z-20">
                        <div className="flex items-center gap-3">
                            <a
                                href="index.html"
                                className="p-2 hover:bg-white/20 rounded-full transition-colors"
                            >
                                <IconArrowLeft className="w-5 h-5" />
                            </a>
                            <div>
                                <h1 className="text-xl font-bold flex items-center gap-2">
                                    <IconWallet className="w-6 h-6" />
                                    è²»ç”¨åˆ†æ”¤æ˜ç´°
                                </h1>
                                <p className="text-white/80 text-sm">é»æ“Šå¡ç‰‡æŸ¥çœ‹å€‹äººæ˜ç´°</p>
                            </div>
                        </div>
                    </div>

                    {/* Summary Banner */}
                    <div className="bg-white/20 backdrop-blur-sm mx-4 mt-4 p-4 rounded-xl text-white">
                        <h2 className="font-bold mb-2">ğŸ’¡ è²»ç”¨è¨ˆç®—èªªæ˜</h2>
                        <ul className="text-sm text-white/90 space-y-1">
                            <li>â€¢ å·²æ‰£é™¤äº’ç›¸å¢Šä»˜å¾Œçš„å°å¸³é‡‘é¡</li>
                            <li>â€¢ åŒ¯ç‡ä»¥ 1 æ—¥å¹£ = 0.2 å°å¹£è¨ˆç®—</li>
                            <li>â€¢ æ»‘é›ªæ•™ç·´è²»ä¾è¨“ç·´æ¯”ä¾‹åˆ†æ”¤ (TAO 20%, SHO 40%, TOTORO 40%)</li>
                        </ul>
                    </div>

                    {/* Cards */}
                    <div className="flex-1 p-4 space-y-4">
                        {membersData.map(person => (
                            <PersonCard key={person.id} person={person} />
                        ))}
                    </div>

                    {/* Footer Summary */}
                    <div className="bg-white/10 backdrop-blur-md p-4 text-white">
                        <h3 className="font-bold mb-2 text-center">ğŸ“Š ç¸½è¦½æ¯”è¼ƒ</h3>
                        <div className="grid grid-cols-4 gap-2 text-center text-xs">
                            {membersData.map(person => {
                                const net = calcTotal(person.expense) - calcTotal(person.income) + person.misc;
                                return (
                                    <div key={person.id} className="bg-white/10 rounded-lg p-2">
                                        <span className="text-lg block">{person.emoji}</span>
                                        <span className="font-bold block">{formatYen(net)}</span>
                                        <span className="text-white/70 text-[10px]">{formatTWD(net)}</span>
                                    </div>
                                );
                            })}
                        </div>
                    </div>

                    {/* Back Button */}
                    <div className="p-4 bg-white/5">
                        <a
                            href="index.html"
                            className="flex items-center justify-center gap-2 w-full py-3 bg-white text-purple-700 font-bold rounded-xl shadow-lg hover:shadow-xl active:scale-[0.98] transition-all"
                        >
                            <IconArrowLeft className="w-5 h-5" />
                            è¿”å›è¡Œç¨‹é é¢
                        </a>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<CostsApp />);
    </script>
</body>

</html>